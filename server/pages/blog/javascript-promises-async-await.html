<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><title>JavaScript Promise and Async/Await</title><meta name="robots" content="follow, index"/><meta name="description" content="A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell."/><meta property="og:url" content="https://dalelarroder.com/blog/javascript-promises-async-await"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Make with ❤️ By Dev-scott "/><meta property="og:description" content="A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell."/><meta property="og:title" content="JavaScript Promise and Async/Await"/><meta property="og:image" content="https://dalelarroder.com/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/dalelarroder"/><meta name="twitter:title" content="JavaScript Promise and Async/Await"/><meta name="twitter:description" content="A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell."/><meta name="twitter:image" content="https://dalelarroder.com/static/images/twitter-card.png"/><meta property="article:published_time" content="2022-04-20T00:00:00.000Z"/><link rel="canonical" href="https://dalelarroder.com/blog/javascript-promises-async-await"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dalelarroder.com/blog/javascript-promises-async-await"
  },
  "headline": "JavaScript Promise and Async/Await",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://dalelarroder.com/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2022-04-20T00:00:00.000Z",
  "dateModified": "2022-04-20T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "Sado Scott"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sado Scott",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dalelarroder.com/static/images/logo.png"
    }
  },
  "description": "A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell."
}</script><meta name="next-head-count" content="19"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/34914eb8d9a0cc81.css" as="style"/><link rel="stylesheet" href="/_next/static/css/34914eb8d9a0cc81.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-bb4e9abb034e932c.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-ee0cf4b7f81d7c24.js" defer=""></script><script src="/_next/static/chunks/pages/_app-abe750725c9335e9.js" defer=""></script><script src="/_next/static/chunks/1bfc9850-f4af2532c81c9a51.js" defer=""></script><script src="/_next/static/chunks/d0c16330-facd763b85b22f73.js" defer=""></script><script src="/_next/static/chunks/0c428ae2-2492c190f8aff126.js" defer=""></script><script src="/_next/static/chunks/d7eeaac4-7b3f8beadad8729d.js" defer=""></script><script src="/_next/static/chunks/d64684d8-e3be492e08e98ef7.js" defer=""></script><script src="/_next/static/chunks/0ae893cf-afc02a0cd79c19cb.js" defer=""></script><script src="/_next/static/chunks/276-fa9240ab6ef99b32.js" defer=""></script><script src="/_next/static/chunks/954-2a5ad612e607064e.js" defer=""></script><script src="/_next/static/chunks/675-8a7bcb32c3fc768b.js" defer=""></script><script src="/_next/static/chunks/789-1b6fe1cae9905140.js" defer=""></script><script src="/_next/static/chunks/613-ff3c42c8b3b529fa.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-cae4e2d1f4191949.js" defer=""></script><script src="/_next/static/thtyuFiDl1j7_OflreNhe/_buildManifest.js" defer=""></script><script src="/_next/static/thtyuFiDl1j7_OflreNhe/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-black dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&false)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}else{c.add('dark')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$--><!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$--><!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$--><div class="mx-auto max-w-3xl px-4 sm:px-9 xl:max-w-5xl xl:px-0"><header class="z-40 bg-transparent py-5 md:py-10"><div class="mx-auto flex max-w-5xl items-center justify-between"><div><a class="flex items-center justify-between" aria-label="Home" href="/"><div class="horizontal-underline text-3xl font-extrabold sm:block">Dev.Scott</div></a></div><div class="flex items-center space-x-3 text-base leading-5"><div class="hidden space-x-5 sm:flex"><a class="horizontal-underline text-base horizontal-underline-active" aria-label="Blog" href="/blog"><span class="font-bold tracking-wide text-gray-900 dark:text-gray-100">Blog</span></a><a class="horizontal-underline text-base" aria-label="About" href="/about"><span class="font-bold tracking-wide text-gray-900 dark:text-gray-100">About</span></a><a class="horizontal-underline text-base" aria-label="Uses" href="/uses"><span class="font-bold tracking-wide text-gray-900 dark:text-gray-100">Uses</span></a></div><div class="flex items-center"><button id="theme-btn" aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="18" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path></svg></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 right-0 z-20 h-full w-full transform bg-white opacity-95 duration-300 ease-in-out dark:bg-black translate-x-full"><header class="flex justify-end py-5 px-4"><button type="button" aria-label="toggle modal" class="h-8 w-8 rounded"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></header><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="horizontal-underline font-bold tracking-widest text-gray-900 backdrop:text-2xl dark:text-gray-100" href="/">Home</a></div><div class="px-12 py-4"><a class="horizontal-underline font-bold tracking-widest text-gray-900 backdrop:text-2xl dark:text-gray-100 horizontal-underline-active" aria-label="Blog" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="horizontal-underline font-bold tracking-widest text-gray-900 backdrop:text-2xl dark:text-gray-100" aria-label="About" href="/about">About</a></div><div class="px-12 py-4"><a class="horizontal-underline font-bold tracking-widest text-gray-900 backdrop:text-2xl dark:text-gray-100" aria-label="Uses" href="/uses">Uses</a></div></nav></div></div></div></div></div></header><div class="flex h-screen flex-col justify-between"><main class="mb-auto" style="opacity:1;transform:none"><article><header class="space-y-1 rounded-lg bg-primary-500 py-4 px-2 text-center sm:py-6 md:py-10"><h1 class="text-2xl font-extrabold leading-9 tracking-tight text-white sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">JavaScript Promise and Async/Await</h1><dl><dt class="sr-only">Published on</dt><dd class="flex flex-col justify-center text-base font-medium leading-6 text-white sm:flex-row sm:space-x-2"><div class="flex items-center justify-center space-x-2"><span>Dale Larroder</span><span>-</span><time dateTime="2022-04-20T00:00:00.000Z">April 20, 2022</time></div><span class="hidden sm:block">-</span><span>4 min read</span></dd></dl></header><div class="divide-y divide-gray-200 font-medium dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-4 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-8 pb-8 dark:prose-dark"><h2 id="overview"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#overview" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>Overview</h2>
<ul><li class="false"><a href="#what-is-a-promise" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">What is a Promise?</a></li><li class="false"><a href="#visualization-of-a-promise" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">Visualization of a Promise</a></li><li class="false"><a href="#what-is-asyncawait" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">What is Async/Await?</a></li><li class="false"><a href="#visualization-of-callback-hell" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">Visualization of callback hell</a></li><li class="false"><a href="#asyncawait-allows-us-to-write-code-like-this" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">Async/Await allows us to write code like this:</a></li><li class="false"><a href="#a-clean-approach" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">A Clean Approach</a></li><li class="false"><a href="#conclusion" class="not-prose border-b border-primary-400 no-underline dark:border-primary-500">Conclusion</a></li></ul>
<h2 id="what-is-a-promise"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#what-is-a-promise" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>What is a Promise?</h2>
<p>The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.</p>
<p>A <strong>Promise</strong> is in one of these states:</p>
<ul>
<li><em>pending</em>: initial state, neither fulfilled nor rejected.</li>
<li><em>fulfilled</em>: meaning that the operation was completed successfully.</li>
<li><em>rejected</em>: meaning that the operation failed.</li>
</ul>
<h2 id="visualization-of-a-promise"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#visualization-of-a-promise" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>Visualization of a Promise</h2>
<p><img src="/static/blog/promises.webp" alt="image"/></p>
<h2 id="what-is-asyncawait"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#what-is-asyncawait" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>What is Async/Await?</h2>
<p>Async/Await was the result of <code>callback hell</code> and nested promises from the <code>old era</code> of JavaScript</p>
<h2 id="visualization-of-callback-hell"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#visualization-of-callback-hell" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>Visualization of callback hell</h2>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> doSomeFetch <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;/some-api&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">doSomeFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">doAnotherFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">doAnoterFetch</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">outcome</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">probablyLastFetch</span><span class="token punctuation">(</span>outcome<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code></pre></div>
<p>But in the real world, it would look some something like this:</p>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token function">doSomeFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">doAnotherFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">doAnoterFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">outcome</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token function">probablyLastFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fin</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">              <span class="token comment">// Ah Finally!</span>
</span><span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">              <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div>
<h2 id="asyncawait-allows-us-to-write-code-like-this"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#asyncawait-allows-us-to-write-code-like-this" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>Async/Await allows us to write code like this:</h2>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doSomeFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnotherFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> outcome <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnoterFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> fin <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">probablyLastFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">)</span>
</span></code></pre></div>
<p>Looks cool right? But how about error handling?
It would look like this:</p>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">let</span> data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">,</span> fin
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">  data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doSomeFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">  result <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnotherFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">  outcome <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnoterFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">  fin <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">probablyLastFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div>
<p>You can also use a single <code>try catch</code> for all of the promises if you don&#x27;t care about catching the individual errors of each promises.</p>
<p>This looks better:</p>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doSomeFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnotherFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> outcome <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnoterFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> fin <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">probablyLastFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div>
<p>But it you want able to catch and identify which block threw an error and handle each case differently, we append a catch block to each async method, kind of similar to the promises way:</p>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doSomeFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span>handleError<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnotherFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span>handleError<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> outcome <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">doAnoterFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span>handleError<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> fin <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">probablyLastFetch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span>handleError<span class="token punctuation">)</span>
</span></code></pre></div>
<h2 id="a-clean-approach"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#a-clean-approach" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>A Clean Approach</h2>
<p>Building up on our previous examples, let&#x27;s create a better error handler:</p>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fancyFetch</span><span class="token punctuation">(</span><span class="token parameter">fetcher<span class="token punctuation">,</span> <span class="token spread operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fetcher</span><span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> error<span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div>
<p>If we have data, we return an array with data as the first parameter and error as null, if we get and error, we return data as null and the error object.</p>
<p>Now to re-write up the async/await example using an array destructring syntax:</p>
<div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> dataError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fancyFetch</span><span class="token punctuation">(</span>doSomeFetch<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>dataError<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// got the error context, do something! }</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">[</span>result<span class="token punctuation">,</span> resultError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fancyFetch</span><span class="token punctuation">(</span>doAnotherFetch<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>resultError<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// got the error context, do something! }</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">[</span>outcome<span class="token punctuation">,</span> outcomeError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fancyFetch</span><span class="token punctuation">(</span>doAnotherFetch<span class="token punctuation">,</span> data<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>outcomeError<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// got the error context, do something! }</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">[</span>fin<span class="token punctuation">,</span> finError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fancyFetch</span><span class="token punctuation">(</span>probablyLastFetch<span class="token punctuation">,</span> data<span class="token punctuation">,</span> result<span class="token punctuation">,</span> outcome<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>finError<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// got the error context, do something! }</span>
</span></code></pre></div>
<h2 id="conclusion"><style data-emotion="css 1tzfalu">.css-1tzfalu{cursor:pointer;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);background-repeat:no-repeat;text-decoration-line:none;-webkit-background-position:0 100%;background-position:0 100%;-webkit-background-size:100% 0.2em;background-size:100% 0.2em;}.css-1tzfalu:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));-webkit-background-size:100% 100%;background-size:100% 100%;}.css-1tzfalu:focus{-webkit-background-size:100% 100%;background-size:100% 100%;}@media (prefers-reduced-motion: no-preference){.css-1tzfalu{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:300ms;}}@media (prefers-color-scheme: dark){.css-1tzfalu{--tw-gradient-from:#DE1D8D;--tw-gradient-to:#DE1D8D;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to);}}</style><a href="#conclusion" aria-hidden="true" tabindex="-1" class="css-1tzfalu"><span class="icon icon-link"></span></a>Conclusion</h2>
<ul>
<li>If you don&#x27;t care about handling errors for individual async calls, go with a single <code>try/catch</code>.</li>
<li>If you care about handling errors for individual async calls, but do not care about the things inside the context of the catch block, use <code>await doSomeFetch().catch(handleError)</code>;</li>
<li>If the answer for both of the above points were &#x27;No&#x27;, then the <code>fancyFetch()</code> approach should work for you.</li>
</ul><div class="grid grid-rows-2 gap-3 pt-4 sm:grid-cols-2 sm:pt-6"><div><div class="flex flex-col items-center space-y-1 sm:items-start"><span class="italic">Previous Blog</span><a class="underline-magical max-w-sm truncate sm:max-w-[250px] xl:max-w-md" href="/blog/snippets/typing-usestate">← <!-- -->How to type the setState function from the useState hook</a></div></div><div><div class="flex flex-col items-center space-y-1 sm:items-end"><span class="italic">Next Blog</span><a class="underline-magical max-w-sm truncate sm:max-w-[250px] xl:max-w-md" href="/blog/how-to-merge-a-repository-into-nx">How to merge a git repository into Nx<!-- --> →</a></div></div></div><div id="comment"><!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$--></div></div></div></div></article></main><footer class="mt-4 border-t-2"><div class="mb-0 flex flex-col justify-start space-y-1.5 space-x-0 py-10 text-gray-500 dark:text-gray-400"><div class="flex flex-col items-center space-y-2 text-sm sm:flex-row sm:justify-between sm:text-base"><ul class="flex space-x-2"><li>© 2023</li><li> • </li><li><a href="https://twitter.com/dev__scott">Make with ❤️ By Dev-scott </a></li></ul><ul class="flex cursor-pointer items-center space-x-5"><li><a href="https://www.linkedin.com/in/dale-larroder/" target="_blank" rel="noreferrer" aria-label="linkedin"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="sm:text-lg" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM349.3 793.7H230.6V411.9h118.7v381.8zm-59.3-434a68.8 68.8 0 1 1 68.8-68.8c-.1 38-30.9 68.8-68.8 68.8zm503.7 434H675.1V608c0-44.3-.8-101.2-61.7-101.2-61.7 0-71.2 48.2-71.2 98v188.9H423.7V411.9h113.8v52.2h1.6c15.8-30 54.5-61.7 112.3-61.7 120.2 0 142.3 79.1 142.3 181.9v209.4z"></path></svg></a></li><li><a href="https://github.com/dev-scott" target="_blank" rel="noreferrer" aria-label="github"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="sm:text-lg" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a href="https://twitter.com/dalelarroder" target="_blank" rel="noreferrer" aria-label="twitter"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="sm:text-lg" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li></ul></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"JavaScript Promise and Async/Await","date":"2022-04-20T00:00:00.000Z","tags":["JavaScript","ReactJs","Snippets","Promises","Async/Await"],"draft":false,"summary":"A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell.","author":"Dale Larroder","body":{"raw":"\n## Overview\n\n\u003cTOCInline toc={props.toc} exclude=\"Overview\" toHeading={2} /\u003e\n\n## What is a Promise?\n\nThe Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.\n\nA **Promise** is in one of these states:\n\n- \u003cem\u003epending\u003c/em\u003e: initial state, neither fulfilled nor rejected.\n- \u003cem\u003efulfilled\u003c/em\u003e: meaning that the operation was completed successfully.\n- \u003cem\u003erejected\u003c/em\u003e: meaning that the operation failed.\n\n## Visualization of a Promise\n\n![image](/static/blog/promises.webp)\n\n## What is Async/Await?\n\nAsync/Await was the result of `callback hell` and nested promises from the `old era` of JavaScript\n\n## Visualization of callback hell\n\n```js\nconst doSomeFetch = fetch('/some-api')\n\ndoSomeFetch()\n  .then((data) =\u003e doAnotherFetch(data))\n  .then((result) =\u003e doAnoterFetch(result))\n  .then((outcome) =\u003e probablyLastFetch(outcome))\n```\n\nBut in the real world, it would look some something like this:\n\n```js\ndoSomeFetch().then((data) =\u003e {\n  doAnotherFetch(data)\n    .then((result) =\u003e {\n      doAnoterFetch(data, result)\n        .then((outcome) =\u003e {\n          probablyLastFetch(data, result, outcome)\n            .then((fin) =\u003e {\n              // Ah Finally!\n            })\n            .catch((e) =\u003e {\n              handleError(e)\n            })\n        })\n        .catch((e) =\u003e {\n          handleError(e)\n        })\n    })\n    .catch((e) =\u003e {\n      handleError(e)\n    })\n})\n```\n\n## Async/Await allows us to write code like this:\n\n```js\nconst data = await doSomeFetch()\nconst result = await doAnotherFetch(data)\nconst outcome = await doAnoterFetch(data, result)\nconst fin = await probablyLastFetch(data, result, outcome)\n```\n\nLooks cool right? But how about error handling?\nIt would look like this:\n\n```js\nlet data, result, outcome, fin\n\ntry {\n  data = await doSomeFetch()\n} catch (e) {\n  handleError(e)\n}\n\ntry {\n  result = await doAnotherFetch(data)\n} catch (e) {\n  handleError(e)\n}\n\ntry {\n  outcome = await doAnoterFetch(data, result)\n} catch (e) {\n  handleError(e)\n}\n\ntry {\n  fin = await probablyLastFetch(data, result, outcome)\n} catch (e) {\n  handleError(e)\n}\n```\n\nYou can also use a single `try catch` for all of the promises if you don't care about catching the individual errors of each promises.\n\nThis looks better:\n\n```js\ntry {\n  const data = await doSomeFetch()\n  const result = await doAnotherFetch(data)\n  const outcome = await doAnoterFetch(data, result)\n  const fin = await probablyLastFetch(data, result, outcome)\n} catch (e) {\n  handleError(e)\n}\n```\n\nBut it you want able to catch and identify which block threw an error and handle each case differently, we append a catch block to each async method, kind of similar to the promises way:\n\n```js\nconst data = await doSomeFetch().catch(handleError)\nconst result = await doAnotherFetch(data).catch(handleError)\nconst outcome = await doAnoterFetch(data, result).catch(handleError)\nconst fin = await probablyLastFetch(data, result, outcome).catch(handleError)\n```\n\n## A Clean Approach\n\nBuilding up on our previous examples, let's create a better error handler:\n\n```js\nexport async function fancyFetch(fetcher, ...args) {\n  try {\n    const data = await fetcher(...args)\n    return [data, null]\n  } catch (error) {\n    log(error)\n    return [null, error]\n  }\n}\n```\n\nIf we have data, we return an array with data as the first parameter and error as null, if we get and error, we return data as null and the error object.\n\nNow to re-write up the async/await example using an array destructring syntax:\n\n```js\nconst [data, dataError] = await fancyFetch(doSomeFetch);\nif(dataError) { // got the error context, do something! }\n\nconst [result, resultError] = await fancyFetch(doAnotherFetch, data);\nif(resultError) { // got the error context, do something! }\n\nconst [outcome, outcomeError] = await fancyFetch(doAnotherFetch, data, result);\nif(outcomeError) { // got the error context, do something! }\n\nconst [fin, finError] = await fancyFetch(probablyLastFetch, data, result, outcome);\nif(finError) { // got the error context, do something! }\n```\n\n## Conclusion\n\n- If you don't care about handling errors for individual async calls, go with a single `try/catch`.\n- If you care about handling errors for individual async calls, but do not care about the things inside the context of the catch block, use `await doSomeFetch().catch(handleError)`;\n- If the answer for both of the above points were 'No', then the `fancyFetch()` approach should work for you.\n","code":"var Component=(()=\u003e{var p=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e,n)=\u003e()=\u003e(n||e((n={exports:{}}).exports,n),n.exports),w=(e,n)=\u003e{for(var s in n)t(e,s,{get:n[s],enumerable:!0})},o=(e,n,s,l)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!N.call(e,c)\u0026\u0026c!==s\u0026\u0026t(e,c,{get:()=\u003en[c],enumerable:!(l=h(n,c))||l.enumerable});return e};var f=(e,n,s)=\u003e(s=e!=null?p(m(e)):{},o(n||!e||!e.__esModule?t(s,\"default\",{value:e,enumerable:!0}):s,e)),y=e=\u003eo(t({},\"__esModule\",{value:!0}),e);var r=k((v,i)=\u003e{i.exports=_jsx_runtime});var j={};w(j,{default:()=\u003eF,frontmatter:()=\u003eg});var a=f(r()),g={title:\"JavaScript Promise and Async/Await\",date:\"2022-04-20\",tags:[\"JavaScript\",\"ReactJs\",\"Snippets\",\"Promises\",\"Async/Await\"],draft:!1,author:\"Dale Larroder\",summary:\"A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell.\"};function d(e){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",ul:\"ul\",li:\"li\",img:\"img\",code:\"code\",pre:\"pre\"},e.components),{TOCInline:s}=n;return s||x(\"TOCInline\",!0,\"12:1-12:63\"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h2,{id:\"overview\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#overview\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Overview\"]}),`\n`,(0,a.jsx)(s,{toc:e.toc,exclude:\"Overview\",toHeading:2}),`\n`,(0,a.jsxs)(n.h2,{id:\"what-is-a-promise\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#what-is-a-promise\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"What is a Promise?\"]}),`\n`,(0,a.jsx)(n.p,{children:\"The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.\"}),`\n`,(0,a.jsxs)(n.p,{children:[\"A \",(0,a.jsx)(n.strong,{children:\"Promise\"}),\" is in one of these states:\"]}),`\n`,(0,a.jsxs)(n.ul,{children:[`\n`,(0,a.jsxs)(n.li,{children:[(0,a.jsx)(\"em\",{children:\"pending\"}),\": initial state, neither fulfilled nor rejected.\"]}),`\n`,(0,a.jsxs)(n.li,{children:[(0,a.jsx)(\"em\",{children:\"fulfilled\"}),\": meaning that the operation was completed successfully.\"]}),`\n`,(0,a.jsxs)(n.li,{children:[(0,a.jsx)(\"em\",{children:\"rejected\"}),\": meaning that the operation failed.\"]}),`\n`]}),`\n`,(0,a.jsxs)(n.h2,{id:\"visualization-of-a-promise\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#visualization-of-a-promise\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Visualization of a Promise\"]}),`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:\"/static/blog/promises.webp\",alt:\"image\"})}),`\n`,(0,a.jsxs)(n.h2,{id:\"what-is-asyncawait\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#what-is-asyncawait\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"What is Async/Await?\"]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Async/Await was the result of \",(0,a.jsx)(n.code,{children:\"callback hell\"}),\" and nested promises from the \",(0,a.jsx)(n.code,{children:\"old era\"}),\" of JavaScript\"]}),`\n`,(0,a.jsxs)(n.h2,{id:\"visualization-of-callback-hell\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#visualization-of-callback-hell\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Visualization of callback hell\"]}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" doSomeFetch \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token string\",children:\"'/some-api'\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"data\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"result\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"outcome\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:\"But in the real world, it would look some something like this:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"data\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"result\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"outcome\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"fin\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// Ah Finally!\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.h2,{id:\"asyncawait-allows-us-to-write-code-like-this\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#asyncawait-allows-us-to-write-code-like-this\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Async/Await allows us to write code like this:\"]}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:`Looks cool right? But how about error handling?\nIt would look like this:`}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),` fin\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.p,{children:[\"You can also use a single \",(0,a.jsx)(n.code,{children:\"try catch\"}),\" for all of the promises if you don't care about catching the individual errors of each promises.\"]}),`\n`,(0,a.jsx)(n.p,{children:\"This looks better:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:\"But it you want able to catch and identify which block threw an error and handle each case differently, we append a catch block to each async method, kind of similar to the promises way:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.h2,{id:\"a-clean-approach\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#a-clean-approach\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"A Clean Approach\"]}),`\n`,(0,a.jsx)(n.p,{children:\"Building up on our previous examples, let's create a better error handler:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsxs)(n.span,{className:\"token parameter\",children:[\"fetcher\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,a.jsx)(n.span,{className:\"token spread operator\",children:\"...\"}),\"args\"]}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fetcher\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token spread operator\",children:\"...\"}),\"args\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword null nil\",children:\"null\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token function\",children:\"log\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,a.jsx)(n.span,{className:\"token keyword null nil\",children:\"null\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" error\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:\"If we have data, we return an array with data as the first parameter and error as null, if we get and error, we return data as null and the error object.\"}),`\n`,(0,a.jsx)(n.p,{children:\"Now to re-write up the async/await example using an array destructring syntax:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" dataError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"doSomeFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"dataError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" resultError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"doAnotherFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"resultError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcomeError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"doAnotherFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"outcomeError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"fin\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" finError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"probablyLastFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"finError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.h2,{id:\"conclusion\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,a.jsxs)(n.ul,{children:[`\n`,(0,a.jsxs)(n.li,{children:[\"If you don't care about handling errors for individual async calls, go with a single \",(0,a.jsx)(n.code,{children:\"try/catch\"}),\".\"]}),`\n`,(0,a.jsxs)(n.li,{children:[\"If you care about handling errors for individual async calls, but do not care about the things inside the context of the catch block, use \",(0,a.jsx)(n.code,{children:\"await doSomeFetch().catch(handleError)\"}),\";\"]}),`\n`,(0,a.jsxs)(n.li,{children:[\"If the answer for both of the above points were 'No', then the \",(0,a.jsx)(n.code,{children:\"fancyFetch()\"}),\" approach should work for you.\"]}),`\n`]})]})}function b(e={}){let{wrapper:n}=e.components||{};return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(d,e)})):d(e)}var F=b;function x(e,n,s){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `D:\\\\@Code\\\\Web\\\\FrontEnd\\\\Next-js\\\\next_dalelarroder_blog\\\\_mdx_bundler_entry_point-247fd934-fdf1-454e-ab3d-dbdd2d713af3.mdx`\":\"\"))}return y(j);})();\n;return Component;"},"_id":"blog/javascript-promises-async-await.mdx","_raw":{"sourceFilePath":"blog/javascript-promises-async-await.mdx","sourceFileName":"javascript-promises-async-await.mdx","sourceFileDir":"blog","contentType":"mdx","flattenedPath":"blog/javascript-promises-async-await"},"type":"Blog","readingTime":{"text":"4 min read","minutes":3.075,"time":184500,"words":615},"slug":"javascript-promises-async-await","toc":[{"value":"Overview","url":"#overview","depth":2},{"value":"What is a Promise?","url":"#what-is-a-promise","depth":2},{"value":"Visualization of a Promise","url":"#visualization-of-a-promise","depth":2},{"value":"What is Async/Await?","url":"#what-is-asyncawait","depth":2},{"value":"Visualization of callback hell","url":"#visualization-of-callback-hell","depth":2},{"value":"Async/Await allows us to write code like this:","url":"#asyncawait-allows-us-to-write-code-like-this","depth":2},{"value":"A Clean Approach","url":"#a-clean-approach","depth":2},{"value":"Conclusion","url":"#conclusion","depth":2}]},"author":"Dale Larroder","prev":{"title":"How to type the setState function from the useState hook","date":"2022-04-14T00:00:00.000Z","tags":["ReactJS","TypeScript","Snippets"],"draft":false,"summary":"A deep dive into how to properly type a setState function from the useState hook.","author":"Dale Larroder","type":"Blog","readingTime":{"text":"2 min read","minutes":1.415,"time":84900,"words":283},"slug":"snippets/typing-usestate","toc":[]},"next":{"title":"How to merge a git repository into Nx","date":"2022-05-18T00:00:00.000Z","tags":["Git","Monorepo","Nx","Workspaces"],"draft":false,"summary":"A guide on how to merge any existing app or library into a Nx monorepo.","author":"Dale Larroder","type":"Blog","readingTime":{"text":"3 min read","minutes":2.95,"time":177000,"words":590},"slug":"how-to-merge-a-repository-into-nx","toc":[{"value":"Overview","url":"#overview","depth":2},{"value":"What is Nx?","url":"#what-is-nx","depth":2},{"value":"Prerequisites","url":"#prerequisites","depth":2},{"value":"Creating an Nx Workspace","url":"#creating-an-nx-workspace","depth":2},{"value":"Nx Workspace Folder structure","url":"#nx-workspace-folder-structure","depth":2},{"value":"Step 1: Clone source repository","url":"#step-1-clone-source-repository","depth":2},{"value":"Step 2: Move all files into the right sub directory.","url":"#step-2-move-all-files-into-the-right-sub-directory","depth":2},{"value":"Step 3: Add remote in your monorepo to packageC","url":"#step-3-add-remote-in-your-monorepo-to-packagec","depth":2},{"value":"Step 4: Merge packageC into monorepo","url":"#step-4-merge-packagec-into-monorepo","depth":2},{"value":"Step 5: Clean up","url":"#step-5-clean-up","depth":2},{"value":"Other tips","url":"#other-tips","depth":2},{"value":"Environment variables","url":"#environment-variables","depth":4},{"value":"Fixing absolute imports from your Create React App","url":"#fixing-absolute-imports-from-your-create-react-app","depth":4},{"value":"Fixing Error: global is not defined","url":"#fixing-error-global-is-not-defined","depth":4}]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["javascript-promises-async-await"]},"buildId":"thtyuFiDl1j7_OflreNhe","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>